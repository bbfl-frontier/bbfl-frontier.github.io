---
import BaseLayout from '../layouts/BaseLayout.astro';
import PageHeader from '../components/PageHeader.astro';
import fs from 'fs';
import path from 'path';

const settings = JSON.parse(fs.readFileSync(path.join(process.cwd(), 'data/settings.json'), 'utf-8'));
---

<BaseLayout
  title="Rules"
  description="Blood & Bourbon Fight League rules and regulations. Learn about our scoring system, judging criteria, weight divisions, and fighter conduct requirements."
>
  <PageHeader title="Rules & Regulations" subtitle="How we fight in the Blood & Bourbon League" />

  <section class="py-16">
    <div class="container mx-auto px-4 max-w-4xl">
      <div class="space-y-8">
        <!-- Event Format -->
        <div class="bg-white rounded-2xl shadow-lg p-8 border-2 border-bourbon">
          <h2 class="text-2xl font-black text-bourbon mb-4">Event Format</h2>
          <div class="prose prose-sm max-w-none">
            <ul class="space-y-2 text-gray-700">
              <li><strong>Schedule:</strong> Events every other Friday at 9:00 PM ET</li>
              <li><strong>Card Structure:</strong> 1-3 preliminary bouts, 1-2 main card bouts, 1 title fight (optional)</li>
              <li><strong>Rounds:</strong> Non-title bouts are 5 rounds, title bouts are 7 rounds</li>
              <li><strong>Round Duration:</strong> Each round is 1 minute with 30 seconds rest between rounds</li>
              <li><strong>Corner Time:</strong> Coaches may enter the ring between rounds to tend to fighters</li>
              <li><strong>Medical Items:</strong> Fighters may use either 1 bandage OR 1 cigarette between rounds (not both)</li>
            </ul>
          </div>
        </div>

        <!-- Scoring System -->
        <div class="bg-white rounded-2xl shadow-lg p-8 border-2 border-bourbon">
          <h2 class="text-2xl font-black text-bourbon mb-4">Ranking Points</h2>
          <div class="grid md:grid-cols-2 gap-6">
            <div>
              <h3 class="font-bold text-lg mb-3">Points Awarded</h3>
              <ul class="space-y-2 text-sm text-gray-700">
                <li><span class="font-semibold text-green-600">+3 points</span> for a win</li>
                <li><span class="font-semibold text-green-600">+2 bonus points</span> for finish (KO/TKO)</li>
                <li><span class="font-semibold text-gray-600">+1 point</span> for a draw</li>
                <li><span class="font-semibold text-red-600">+0 points</span> for a loss</li>
              </ul>
            </div>
            <div>
              <h3 class="font-bold text-lg mb-3">Championships</h3>
              <ul class="space-y-2 text-sm text-gray-700">
                <li>Champions must defend title every {settings.championDefenseRequired} events</li>
                <li>Title fights are 7 rounds</li>
                <li>Champions cannot move divisions while holding belt</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Judging Criteria -->
        <div class="bg-white rounded-2xl shadow-lg p-8 border-2 border-bourbon">
          <h2 class="text-2xl font-black text-bourbon mb-4">Judging Criteria</h2>
          <div class="prose prose-sm max-w-none">
            <p class="text-gray-700 mb-4">
              Rounds are scored using the 10-point must system. The winner of each round receives 10 points,
              the loser receives 9 or fewer based on dominance.
            </p>
            <h3 class="font-bold text-lg mb-3">Scoring Priority</h3>
            <ol class="list-decimal list-inside space-y-2 text-gray-700">
              <li>Effective striking and grappling</li>
              <li>Effective aggression</li>
              <li>Ring control</li>
            </ol>
          </div>
        </div>

        <!-- Fighter Purses -->
        <div class="bg-white rounded-2xl shadow-lg p-8 border-2 border-bourbon">
          <h2 class="text-2xl font-black text-bourbon mb-4">Fighter Purses</h2>
          <div class="grid md:grid-cols-2 gap-6">
            <div>
              <h3 class="font-bold text-lg mb-3">Base Pay</h3>
              <ul class="space-y-2 text-sm text-gray-700">
                <li><strong>Preliminary Bout:</strong> ${settings.purses.prelim}</li>
                <li><strong>Main Card:</strong> ${settings.purses.mainCard}</li>
                <li><strong>Title Fight:</strong> ${settings.purses.title}</li>
              </ul>
            </div>
            <div>
              <h3 class="font-bold text-lg mb-3">Bonuses</h3>
              <ul class="space-y-2 text-sm text-gray-700">
                <li><strong>Knockout Bonus:</strong> +${settings.purses.koBonus}</li>
                <li><strong>Fight of the Night:</strong> Awarded at discretion</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Safety & Conduct -->
        <div class="bg-white rounded-2xl shadow-lg p-8 border-2 border-bourbon">
          <h2 class="text-2xl font-black text-bourbon mb-4">Safety & Conduct</h2>
          <div class="prose prose-sm max-w-none">
            <ul class="space-y-2 text-gray-700">
              <li>All fighters must pass medical examination before competing</li>
              <li>Referee has authority to stop fight at any time for fighter safety</li>
              <li><strong>Illegal strikes:</strong> groin strikes, eye pokes, back of head, spine attacks, striking a grounded opponent</li>
              <li>Unsportsmanlike conduct will result in disqualification</li>
              <li>Weight cuts must be done safely under medical supervision</li>
            </ul>
          </div>
        </div>

        <!-- Betting Information -->
        <div class="bg-white rounded-2xl shadow-lg p-8 border-2 border-bourbon">
          <h2 class="text-2xl font-black text-bourbon mb-4">Betting & Wagering</h2>
          <div class="prose prose-sm max-w-none">
            <p class="text-gray-700">
              All betting must be authorized by the league organisers through an agreed third party.
              Fighters, coaches, and officials are strictly prohibited from betting on any BBFL events.
              Violations will result in permanent suspension from the league.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
